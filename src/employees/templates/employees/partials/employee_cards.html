{% if employees %}
  <div class="row g-4">
    {% for employee in employees %}
      <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12">
        <div class="card employee-card h-100">
          <div class="card-img-top">
            <i class="bi bi-person-circle"></i>
          </div>

          <span class="badge hierarchy-badge bg-{% if employee.hierarchy == 1 %}
              danger
            {% elif employee.hierarchy == 2 %}
              warning
            {% elif employee.hierarchy == 3 %}
              info
            {% elif employee.hierarchy == 4 %}
              primary
            {% else %}
              secondary
            {% endif %}">
            {{ employee.get_hierarchy_display }}
          </span>

          <div class="card-body">
            <h5 class="card-title">{{ employee.full_name }}</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{ employee.position }}</h6>

            {% if employee.department %}
              <p class="card-text small text-muted mb-2">
                <i class="bi bi-building"></i> {{ employee.department }}
              </p>
            {% endif %}

            <div class="contact-info">
              {% if employee.phone %}
                <p class="mb-1">
                  <i class="bi bi-telephone"></i> {{ employee.phone }}
                </p>
              {% endif %}

              {% if employee.internal_phone %}
                <p class="mb-1">
                  <i class="bi bi-telephone-inbound"></i> {{ employee.internal_phone }}
                </p>
              {% endif %}

              {% if employee.email %}
                <p class="mb-1">
                  <i class="bi bi-envelope"></i> {{ employee.email }}
                </p>
              {% endif %}

              {% if employee.room %}
                <p class="mb-0">
                  <i class="bi bi-geo-alt"></i> Каб. {{ employee.room }}
                </p>
              {% endif %}
            </div>
          </div>

          <div class="card-footer bg-transparent border-0 pt-0">
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-primary flex-fill" onclick="openModal('Редактировать сотрудника', '{% url 'employee_update' employee.pk %}')"><i class="bi bi-pencil"></i></button>
              <button class="btn btn-sm btn-outline-danger" onclick="openModal('Удалить сотрудника', '{% url 'employee_delete' employee.pk %}')"><i class="bi bi-trash"></i></button>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Пагинация -->
  {% if page_obj.has_other_pages %}
    <nav class="mt-4">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link"
              hx-get="{% url 'employee_list' %}?page={{ page_obj.previous_page_number }}{% if search_query %}
                &q={{ search_query }}
              {% endif %}"
              hx-target="#employee-cards">
              &laquo;
            </a>
          </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
          <li class="page-item {% if page_obj.number == num %}active{% endif %}">
            <a class="page-link"
              hx-get="{% url 'employee_list' %}?page={{ num }}{% if search_query %}
                &q={{ search_query }}
              {% endif %}"
              hx-target="#employee-cards">
              {{ num }}
            </a>
          </li>
        {% endfor %}

        {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link"
              hx-get="{% url 'employee_list' %}?page={{ page_obj.next_page_number }}{% if search_query %}
                &q={{ search_query }}
              {% endif %}"
              hx-target="#employee-cards">
              &raquo;
            </a>
          </li>
        {% endif %}
      </ul>
    </nav>
  {% endif %}
{% else %}
  <div class="text-center py-5">
    <i class="bi bi-people display-1 text-muted"></i>
    <h4 class="text-muted mt-3">Сотрудники не найдены</h4>
    <p class="text-muted">Попробуйте изменить параметры поиска</p>
  </div>
{% endif %}
